<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PDF Text Extraction Debug</title>
  <!-- pdfjs-dist for extracting text from PDF files -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
</head>
<body>
  <h1>PDF Text Extraction Debug</h1>
  <button id="extractTextBtn">Extract Text from PDF</button>

  <!-- Debug information will be displayed here -->
  <div id="debugInfo" style="white-space: pre-wrap; background-color: #f0f0f0; padding: 10px; border: 1px solid #ddd;"></div>

  <script>
    const pdfUrl = 'https://theeuropean417.github.io/TheEuropeanEmployee/handbook-template.pdf';
    const debugInfoDiv = document.getElementById('debugInfo');

    // Function to log debug information on the page
    function logDebugInfo(message) {
      debugInfoDiv.textContent += message + '\n';
    }

    // Function to extract text from PDF using pdfjs-dist
    async function extractTextFromPDF() {
      try {
        logDebugInfo("Starting PDF text extraction...");

        // Load the PDF document from the given URL
        const loadingTask = pdfjsLib.getDocument(pdfUrl);
        const pdf = await loadingTask.promise;
        logDebugInfo(`PDF loaded successfully. Number of pages: ${pdf.numPages}`);

        // Loop through each page in the PDF
        for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {
          logDebugInfo(`\nExtracting text from page ${pageNum}...`);

          const page = await pdf.getPage(pageNum);
          const textContent = await page.getTextContent();

          let pageText = '';
          textContent.items.forEach((item) => {
            pageText += item.str + ' ';
          });

          logDebugInfo(`Page ${pageNum} Text:\n${pageText}\n`);
        }

        logDebugInfo("Text extraction completed.");
      } catch (error) {
        logDebugInfo(`Error during PDF text extraction: ${error.message}`);
      }
    }

    // Button event listener to trigger text extraction
    document.getElementById('extractTextBtn').addEventListener('click', () => {
      // Clear previous debug info
      debugInfoDiv.textContent = '';
      extractTextFromPDF();
    });
  </script>
</body>
</html>
